<%- layout('layouts/main') %>

<section class="py-5">
    <div class="container">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item"><a href="/courses">Courses</a></li>
                <li class="breadcrumb-item active" aria-current="page"><%= course.name %></li>
            </ol>
        </nav>
        
        <div class="row">
            <!-- Course Info -->
            <div class="col-lg-8 mb-4">
                <!-- Course Header -->
                <div class="card shadow-sm mb-4">
                    <div class="card-img-top bg-gradient d-flex align-items-center justify-content-center" style="height: 300px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <i class="bi bi-play-circle text-white" style="font-size: 8rem;"></i>
                    </div>
                    <div class="card-body">
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <span class="badge bg-secondary"><%= course.category %></span>
                            <span class="badge <%= course.level === 'Beginner' ? 'bg-success' : course.level === 'Intermediate' ? 'bg-warning text-dark' : 'bg-danger' %>">
                                <%= course.level %>
                            </span>
                        </div>
                        
                        <h1 class="mb-3"><%= course.name %></h1>
                        <p class="lead"><%= course.description %></p>
                        
                        <div class="d-flex flex-wrap gap-4 text-muted mb-3">
                            <span><i class="bi bi-person-circle"></i> Instructor: <strong><%= course.instructor %></strong></span>
                            <span><i class="bi bi-people"></i> <%= course.students %> students</span>
                        </div>
                        
                        <div class="d-flex align-items-center mb-3">
                            <div class="text-warning me-2">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-half"></i>
                            </div>
                            <span class="text-muted">(4.5) - 256 reviews</span>
                        </div>
                    </div>
                </div>
                
                <!-- What You'll Learn -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white">
                        <h4 class="mb-0"><i class="bi bi-check-circle"></i> What You'll Learn</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <ul class="list-unstyled">
                                    <li class="mb-2"><i class="bi bi-check text-success me-2"></i>Core concepts and fundamentals</li>
                                    <li class="mb-2"><i class="bi bi-check text-success me-2"></i>Practical hands-on projects</li>
                                    <li class="mb-2"><i class="bi bi-check text-success me-2"></i>Industry best practices</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-unstyled">
                                    <li class="mb-2"><i class="bi bi-check text-success me-2"></i>Real-world applications</li>
                                    <li class="mb-2"><i class="bi bi-check text-success me-2"></i>Problem-solving techniques</li>
                                    <li class="mb-2"><i class="bi bi-check text-success me-2"></i>Career advancement skills</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Course Content -->
                <div class="card shadow-sm">
                    <div class="card-header bg-white">
                        <h4 class="mb-0"><i class="bi bi-collection-play"></i> Course Content</h4>
                    </div>
                    <div class="card-body">
                        <p class="text-muted mb-3"><%= course.lessons %> lessons â€¢ <%= course.duration %> total</p>
                        
                        <div class="accordion" id="courseContent">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#module1">
                                        Module 1: Introduction
                                    </button>
                                </h2>
                                <div id="module1" class="accordion-collapse collapse show" data-bs-parent="#courseContent">
                                    <div class="accordion-body">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                <span><i class="bi bi-play-circle me-2"></i>Welcome to the Course</span>
                                                <span class="text-muted">5:00</span>
                                            </li>
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                <span><i class="bi bi-play-circle me-2"></i>Course Overview</span>
                                                <span class="text-muted">10:00</span>
                                            </li>
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                <span><i class="bi bi-play-circle me-2"></i>Setting Up Environment</span>
                                                <span class="text-muted">15:00</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#module2">
                                        Module 2: Core Concepts
                                    </button>
                                </h2>
                                <div id="module2" class="accordion-collapse collapse" data-bs-parent="#courseContent">
                                    <div class="accordion-body">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                <span><i class="bi bi-lock me-2"></i>Fundamentals Part 1</span>
                                                <span class="text-muted">20:00</span>
                                            </li>
                                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                                <span><i class="bi bi-lock me-2"></i>Fundamentals Part 2</span>
                                                <span class="text-muted">25:00</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="col-lg-4">
                <div class="card shadow-sm sticky-top" style="top: 80px;">
                    <div class="card-body">
                        <h2 class="text-primary mb-4">$<%= course.price.toFixed(2) %></h2>
                        
                        <form action="/cart/add" method="POST" class="mb-3">
                            <input type="hidden" name="id" value="<%= course.id %>">
                            <input type="hidden" name="type" value="course">
                            <button type="submit" class="btn btn-primary btn-lg w-100 mb-2">
                                <i class="bi bi-cart-plus"></i> Add to Cart
                            </button>
                        </form>
                        
                        <button class="btn btn-outline-secondary w-100 mb-4">
                            <i class="bi bi-heart"></i> Add to Wishlist
                        </button>
                        
                        <h6 class="mb-3">This course includes:</h6>
                        <ul class="list-unstyled">
                            <li class="mb-2"><i class="bi bi-clock text-primary me-2"></i><%= course.duration %> of content</li>
                            <li class="mb-2"><i class="bi bi-collection-play text-primary me-2"></i><%= course.lessons %> lessons</li>
                            <li class="mb-2"><i class="bi bi-infinity text-primary me-2"></i>Lifetime access</li>
                            <li class="mb-2"><i class="bi bi-phone text-primary me-2"></i>Access on mobile</li>
                            <li class="mb-2"><i class="bi bi-award text-primary me-2"></i>Certificate of completion</li>
                            <li class="mb-2"><i class="bi bi-arrow-counterclockwise text-primary me-2"></i>30-day money back</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Related Courses -->
        <% if (relatedCourses.length > 0) { %>
            <section class="mt-5">
                <h3 class="mb-4">Related Courses</h3>
                <div class="row g-4">
                    <% relatedCourses.forEach(related => { %>
                        <div class="col-md-4">
                            <div class="card h-100 shadow-sm">
                                <div class="card-img-top bg-gradient d-flex align-items-center justify-content-center" style="height: 120px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                    <i class="bi bi-play-circle display-4 text-white"></i>
                                </div>
                                <div class="card-body">
                                    <h6 class="card-title"><%= related.name %></h6>
                                    <p class="text-muted small"><i class="bi bi-person"></i> <%= related.instructor %></p>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <span class="fw-bold text-primary">$<%= related.price.toFixed(2) %></span>
                                        <a href="/courses/<%= related.id %>" class="btn btn-sm btn-outline-primary">View</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                </div>
            </section>
        <% } %>
    </div>
</section>